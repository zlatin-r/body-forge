{% extends 'base.html' %}
{% load placeholder_filter %}
{% load static %}

{% block content %}

    <div class="background-img d-flex-col-cent">
        <div class="container d-flex-col-cent">

            <form method="post" class="wt-create-form d-flex-col-cent blur-background">
                {% csrf_token %}
                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

                <section class="wt-type-section d-flex-col-cent gap25">
                    {% if wt_types %}
                        <label class="second-title" for="workoutType">Select Workout Type:</label>

                        <select name="workout_type" id="workoutType">
                            {% for wt in wt_types %}
                                <option value="{{ wt.id }}">{{ wt.name }}</option>
                            {% endfor %}
                        </select>

                    {% else %}
                        <p class="second-title">You Dont Have Any Types.</p>
                    {% endif %}

                    <div class="btn-container d-flex gap25">
                        <a href="{% url 'wt-type-create' %}" class="glow-on-hover d-flex-col-cent">Add new workout
                            type</a>
                        <button type="button" id="deleteWorkoutTypeBtn" class="red-glow-on-hover danger-btn">
                            Delete Selected Type
                        </button>
                    </div>
                </section>

                <hr class="hr-line">

                <section class="wt-exercises container d-flex-col-cent gap25">
                    <label for="exercisesList" class="second-title">Select Exercise:</label>

                    {% if exercises %}

                        <select name="exercises" id="exercisesList">
                            {% for ex in exercises %}
                                <option value="{{ ex.id }}">{{ ex.name }}</option>
                            {% endfor %}
                        </select>

                        <button type="button" id="startExerciseBtn" class="glow-on-hover d-flex-col-cent">Start Selected
                            Exercise
                        </button>

                    {% else %}
                        <p class="second-title">You Dont Have Any Exercises.</p>
                    {% endif %}

                    <div class="btn-container d-flex gap25">
                        <a href="{% url 'ex-start' %}" class="glow-on-hover d-flex-col-cent">Add new exercise</a>
                        <button type="button" id="deleteExerciseBtn" class="red-glow-on-hover danger-btn">
                            Delete Selected Exercise
                        </button>
                    </div>

                </section>

                <hr class="hr-line">

                <section class="exercise-logs">
                    <h2>Conducted Exercises and Sets</h2>
                    {% if exercises %}
                        {% for exercise in exercises %}
                            <div class="exercise-log">
                                <h3>{{ exercise.name }} (Muscle Group: {{ exercise.muscle_group.name }})</h3>

                                {% if exercise.sets.all %}
                                    <ul>
                                        {% for set in exercise.sets.all %}
                                            <li>Repetitions: {{ set.repetitions }}, Weight: {{ set.weight }} kg</li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>No sets recorded yet for this exercise.</p>
                                {% endif %}
                            </div>
                        {% endfor %}
                    {% else %}
                        <p>No exercises recorded yet.</p>
                    {% endif %}
                </section>

                <button type="submit" class="glow-on-hover">Finish Workout</button>
            </form>


        </div>
    </div>

{% endblock %}
